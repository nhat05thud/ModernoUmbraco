@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Master.cshtml";
    var current = (IPublishedContent)CurrentPage;
    var moreItems = current.Parent.Children().Where(x => x.Id != current.Id).OrderBy(x => Guid.NewGuid()).ToList().Take(3);
    var moreImages = current.GetPropertyValue<IEnumerable<IPublishedContent>>("moreImage");
}

@* the fun starts here *@

<div class="wrap__blog">
    <div class="content">
        <h1 class="text-center">@current.Name</h1>
        <div class="wrap-content">
            @current.GetPropertyValue("content")
        </div>
    </div>
    @if (moreImages != null)
    {
        <div class="slide-images">
            <div class="main-img-carousel owl-carousel">
                @foreach (var item in moreImages)
                {
                    <div class="item">
                        <img src="@(item.GetCropUrl(1600, 769, furtherOptions: "&slimmage=true"))" alt="" />
                    </div>
                }
            </div>
            <div class="thumb-img-carousel owl-carousel">
                @foreach (var item in moreImages)
                {
                    <div class="item">
                        <img src="@(item.GetCropUrl(145, 100, furtherOptions: "&slimmage=true"))" alt="" />
                    </div>
                }
            </div>
        </div>
    }
    <div class="more-items">
        <h1 class="text-center text-uppercase">Một số tin khác</h1>
        <div class="blog__category more__item-cate">
            <div class="list-item">
                @foreach (var item in moreItems)
                {
                    var thumb = Umbraco.TypedMedia(item.GetPropertyValue<int>("image"));
                    <div class="item item-2">
                        <div class="wrap-item">
                            <img class="lazyload" data-original="@(thumb != null ? thumb.GetCropUrl(520, 470, furtherOptions: "&slimmage=true") : "/images/no-image.png?anchor=center&mode=BoxPad&width=520&height=470&bgcolor=fff&slimmage=true&rnd=" + item.UpdateDate.ToString("ddMMyyyhhmmss"))" alt="@item.Name" />
                            <div class="content">
                                <a href="@item.Url">
                                    <p class="date">@(item.CreateDate.ToString("dd.MM.yyyy"))</p>
                                    <h1>@item.Name</h1>
                                    <p class="hashtag text-right">@item.GetPropertyValue("hashTag")</p>
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>